import{Q as y,a as Q}from"./QCard-DRhbeSeQ.js";import{Q as C}from"./QBtn-CpPlhTW9.js";import{Q as P}from"./QCardActions-DWGhiwWq.js";import{Q as T}from"./QDialog-2jei2Dsv.js";import{_ as V,q as x,r as g,v as A,f as B,z as e,m as i,A as N,B as v,C as h,t as b,u as c,j as d}from"./index-BoGljDLN.js";import{b as D,u as O,a as j}from"./token--ulPFVqS.js";import{u as q}from"./aufgaben-lGrxl6jT.js";import{l as k}from"./language-CpZRSw5K.js";import"./render-CABIAf-z.js";import"./use-dark-CpAO_YU6.js";import"./QSpinner-BFNwqP9i.js";import"./vm-DK5zCSE4.js";import"./focus-manager-BJWzFvJg.js";import"./request-CTPT2BVh.js";async function E(m,s){const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,passwort:s})};console.log(m,s),console.log(n);const a=await fetch(D+"/tokens/login",n);if(a.ok)return await a.json();console.log("HTTP-Error: "+a.status),console.log(a)}const J={class:"login-page"},U={class:"login-form"},L={__name:"LoginPage",setup(m){const s=O(),n=j(),a=q(),f=x(),u=g(""),p=g(""),l=g(!1),w=async()=>{console.log("username = "+u.value),console.log("password = "+p.value);const t=await E(u.value,p.value);(t==null?void 0:t.token)!=""&&(JSON.parse(t.account).rang>0?f.push("/managment_dashboard"):f.push("/dashboard")),n.account=JSON.parse(t.account),s.token=t.token,s.refresh_token=t.refresh_token,console.log(s.token),console.log(a.aufgaben),a.fetchAufgaben(),setTimeout(()=>{console.log("Refreshing token"),s.refreshToken()},1e3*1)},_=()=>{l.value=!0,console.log(l.value)},S=()=>{l.value=!1};return(t,o)=>(B(),A("div",J,[e("div",U,[o[4]||(o[4]=e("h1",{class:"logo"},"flow",-1)),e("form",{onSubmit:N(w,["prevent"])},[v(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=r=>u.value=r),placeholder:"Email",required:""},null,512),[[h,u.value]]),v(e("input",{type:"password","onUpdate:modelValue":o[1]||(o[1]=r=>p.value=r),placeholder:"Password",required:""},null,512),[[h,p.value]]),o[3]||(o[3]=e("button",null,"login",-1))],32),e("button",{class:"password",onClick:_},b(c(k).passwort_vergessen[c(n).sprache]),1)]),i(T,{modelValue:l.value,"onUpdate:modelValue":o[2]||(o[2]=r=>l.value=r)},{default:d(()=>[i(y,null,{default:d(()=>[i(Q,null,{default:d(()=>[e("h4",null,b(c(k).leider_pech_gehabt[c(n).sprache]),1),o[5]||(o[5]=e("h5",null,"Aber wird vielleicht spÃ¤ter mal implementiert",-1))]),_:1}),i(P,{align:"right"},{default:d(()=>[i(C,{flat:"",label:"Dismiss",color:"primary",onClick:S})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},eo=V(L,[["__scopeId","data-v-4eab4182"]]);export{eo as default};
