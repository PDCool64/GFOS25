import{C,P as B,A as M,p as T,a as j}from"./chart-6FDCjQWP.js";import{a1 as D,a2 as S,h as P,a3 as q,r as b,J as A,a4 as E,w as F,a5 as x,Q as G,a6 as O,_ as K,v as N,f as U,m as $,u as J}from"./index-BoGljDLN.js";import{u as Q}from"./aufgaben-lGrxl6jT.js";/* empty css                                                                                  */const w={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},V={ariaLabel:{type:String},ariaDescribedby:{type:String}},z={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...w,...V},H=q[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function l(e){return O(e)?x(e):e}function W(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return O(t)?new Proxy(e,{}):e}function X(e,t){const a=e.options;a&&t&&Object.assign(a,t)}function k(e,t){e.labels=t}function L(e,t,a){const r=[];e.datasets=t.map(n=>{const s=e.datasets.find(u=>u[a]===n[a]);return!s||!n.data||r.includes(s)?{...n}:(r.push(s),Object.assign(s,n),s)})}function Y(e,t){const a={labels:[],datasets:[]};return k(a,e.labels),L(a,e.datasets,t),a}const Z=D({props:z,setup(e,t){let{expose:a,slots:r}=t;const n=b(null),s=S(null);a({chart:s});const u=()=>{if(!n.value)return;const{type:o,data:f,options:v,plugins:p,datasetIdKey:m}=e,y=Y(f,m),i=W(y,f);s.value=new C(n.value,{type:o,data:i,options:{...v},plugins:p})},d=()=>{const o=x(s.value);o&&(e.destroyDelay>0?setTimeout(()=>{o.destroy(),s.value=null},e.destroyDelay):(o.destroy(),s.value=null))},I=o=>{o.update(e.updateMode)};return A(u),E(d),F([()=>e.options,()=>e.data],(o,f)=>{let[v,p]=o,[m,y]=f;const i=x(s.value);if(!i)return;let g=!1;if(v){const c=l(v),h=l(m);c&&c!==h&&(X(i,c),g=!0)}if(p){const c=l(p.labels),h=l(y.labels),_=l(p.datasets),R=l(y.datasets);c!==h&&(k(i.config.data,c),g=!0),_&&_!==R&&(L(i.config.data,_,e.datasetIdKey),g=!0)}g&&G(()=>{I(i)})},{deep:!0}),()=>P("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:n},[P("p",{},[r.default?r.default():""])])}});function ee(e,t){return C.register(t),D({props:w,setup(a,r){let{expose:n}=r;const s=S(null),u=d=>{s.value=d==null?void 0:d.chart};return n({chart:s}),()=>P(Z,H({ref:u},{type:e,...a}))}})}const te=ee("pie",B),ae={class:"wrapper"},se={__name:"AufgabenPieGraphComponent",setup(e){C.register(M,T,j);const t=b(null),a=Q(),r=b({labels:["Done","In-Progress","Open"],datasets:[{backgroundColor:["#21BA45","#F2C037","#C10015"],data:[a.activeStats.done,a.activeStats.in_progress,a.activeStats.undone]}]}),n=b({responsive:!0,maintainAspectRatio:!1});return A(()=>{t.value&&t.value.chart&&t.value.chart.update()}),a.$subscribe(()=>{t.value&&t.value.chart&&(r.value={...r.value,datasets:[{backgroundColor:["#21BA45","#F2C037","#C10015"],data:[a.activeStats.done,a.activeStats.in_progress,a.activeStats.undone]}]},t.value.chart.update())}),(s,u)=>(U(),N("div",ae,[$(J(te),{data:r.value,options:n.value,ref_key:"chartRef",ref:t},null,8,["data","options"])]))}},ue=K(se,[["__scopeId","data-v-e5251e1e"]]);export{ue as A};
