import{a7 as o,q as n}from"./index-BoGljDLN.js";const r=o("account",{state:()=>({account:{id:-1,email:"",vorname:"",nachname:""}}),getters:{sprache(){return this.account.einstellungen===void 0?"de":this.account.einstellungen.sprache}},actions:{reset(){this.account={settings:this.account.settings,id:-1,email:"",vorname:"",nachname:""}}},persist:{enabled:!0,strategy:"local"}}),a="http://localhost:8080/Backend/api",s=r(),i=o("token",{state:()=>({token:"",refresh_token:""}),getters:{},actions:{clearToken(){this.token=""},async logout(){const e=n();this.token="",this.refresh_token="",s.reset(),await e.push("/login")},async refreshToken(){console.log("refreshing token");const e=await fetch(a+"/tokens/refresh",{method:"POST",body:JSON.stringify({email:s.account.email,refresh_token:this.refresh_token}),headers:{"Content-Type":"application/json"}});if(!e.ok)throw console.log(e),new Error("HTTP error, status = "+e.status);const t=await e.json();this.token=t.token,this.refresh_token=t.refresh_token,setTimeout(()=>{this.refreshToken()},1e3*60*5)}},persist:{enabled:!0,strategy:"local"}});export{r as a,a as b,i as u};
